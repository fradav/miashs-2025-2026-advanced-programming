<!DOCTYPE html>
<html lang="en-EN"><head>
<script src="02_Parallel-intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="02_Parallel-intro_files/libs/quarto-html/tabby.min.js"></script>
<script src="02_Parallel-intro_files/libs/quarto-html/popper.min.js"></script>
<script src="02_Parallel-intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="02_Parallel-intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02_Parallel-intro_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="02_Parallel-intro_files/libs/quarto-html/quarto-syntax-highlighting-dark-befe23ebd2f54d8af2c8a89d1a1611f1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="02_Parallel-intro_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="02_Parallel-intro_files/libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<link href="02_Parallel-intro_files/libs/quarto-contrib/grid-no-htext-1.0.0/grid_no_htext.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.34">

  <meta name="author" content="Fran√ßois-David Collin">
  <meta name="author" content="Ghislain Durif">
  <title>Introduction to parallel computing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="02_Parallel-intro_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="02_Parallel-intro_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="02_Parallel-intro_files/libs/revealjs/dist/theme/quarto-d544bd66fbdc5badc5a277a2930e2a0b.css">
  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/reveal-attribution/attribution.css" rel="stylesheet">
  <link href="02_Parallel-intro_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introduction to parallel computing</h1>
  <p class="subtitle">A very general (and generic) introduction</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Fran√ßois-David Collin 
</div>
<div class="quarto-title-author-email">
<a href="mailto:francois-david.collin@umontpellier.fr">francois-david.collin@umontpellier.fr</a>
</div>
        <p class="quarto-title-affiliation">
            CNRS
          </p>
        <p class="quarto-title-affiliation">
            IMAG
          </p>
        <p class="quarto-title-affiliation">
            Paul-Val√©ry Montpellier 3 University
          </p>
    </div>
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ghislain Durif 
</div>
<div class="quarto-title-author-email">
<a href="mailto:ghislain.durif@ens-lyon.fr">ghislain.durif@ens-lyon.fr</a>
</div>
        <p class="quarto-title-affiliation">
            CNRS
          </p>
        <p class="quarto-title-affiliation">
            LBMC
          </p>
    </div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/parallel-computing-the-intuition" id="/toc-parallel-computing-the-intuition">Parallel computing: the intuition</a></li>
<li><a href="#/why-parallel-computing-1" id="/toc-why-parallel-computing-1">Why parallel computing</a></li>
<li><a href="#/benefits-of-parallel-computing" id="/toc-benefits-of-parallel-computing">Benefits of parallel computing</a></li>
<li><a href="#/laws" id="/toc-laws">Laws</a></li>
<li><a href="#/types-of-parallelism" id="/toc-types-of-parallelism">Types of parallelism</a></li>
<li><a href="#/conclusion" id="/toc-conclusion">Conclusion</a></li>
<li><a href="#/references" id="/toc-references">References</a></li>
</ul>
</nav>
</section>
<section>
<section id="parallel-computing-the-intuition" class="title-slide slide level1 center">
<h1>Parallel computing: the intuition</h1>

</section>
<section id="computing" class="slide level2 center">
<h2>Computing ?</h2>
<ul>
<li>a <strong>computation</strong> = a succession of <strong>tasks</strong> to complete</li>
<li>a <strong>task</strong> <span class="math inline">\approx</span> a single command/action or a group of commands/actions</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p>Example 1:</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p>Example 2:</p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># task i:</span></span>
<span id="cb1-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># sum of elements at index i</span></span>
<span id="cb1-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># from two vectors</span></span>
<span id="cb1-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb1-5"><a href="" aria-hidden="true" tabindex="-1"></a>    res[i] <span class="op">=</span> a[i] <span class="op">+</span> b[i]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># task 1: matrix product</span></span>
<span id="cb2-2"><a href="" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> A <span class="op">@</span> B</span>
<span id="cb2-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># task 2: colwise sum over matrix C</span></span>
<span id="cb2-4"><a href="" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(C,axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="why-parallel-computing" class="slide level2 center">
<h2>Why parallel computing?</h2>
<ul>
<li><p><strong>Objective:</strong> accelerate computations &lt;=&gt; reduce computation time</p></li>
<li><p><strong>Idea:</strong> run multiple tasks in parallel instead of sequentially</p></li>
</ul>
</section>
<section id="context-level-1" class="slide level2 center">
<h2>Context (level 1)</h2>
<ul>
<li><p>different <strong>tasks</strong> to complete</p></li>
<li><p>one or more <strong>workers</strong> to complete the tasks</p></li>
</ul>
</section>
<section id="sequential-computing" class="slide level2 center">
<h2>Sequential computing</h2>
<div class="quarto-layout-panel" data-layout="[70,30]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 70.0%;justify-content: flex-start;">
<ul>
<li><span class="math inline">n</span> tasks to complete (<span class="math inline">n&gt;1</span>)</li>
<li>1 worker</li>
</ul>
<p><strong>Total time</strong> (exercise)</p>
<div class="fragment">
<p><span class="math inline">\sum_{i=1}^n t_i \sim O(n)</span>\ with <span class="math inline">t_i</span> time to complete task <span class="math inline">i</span>}</p>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 30.0%;justify-content: center;">
<p><img data-src="d2-figures/sequential-computing.svg" class="noinvert" width="300"></p>
</div>
</div>
</div>
</section>
<section id="parallel-computing-the-most-simple-case" class="slide level2 nostretch center">
<h2>Parallel computing (the most simple case)</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="d2-figures/parallel-computing-simple.svg" class="noinvert quarto-figure quarto-figure-center" width="700"></p>
</figure>
</div>
<ul>
<li><span class="math inline">n</span> tasks to complete (<span class="math inline">n&gt;1</span>)</li>
<li><span class="math inline">p</span> workers (<span class="math inline">p&gt;=n</span>)</li>
</ul>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Total time</strong> (exercise)</p>
<div class="fragment">
<p><span class="math inline">\underset{i=1,\dots,n}{\text{max}}\{t_i\}\sim O(1)</span>\ with <span class="math inline">t_i</span> time to complete task <span class="math inline">i</span></p>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p><strong>Potential bottleneck?</strong> (exercise)</p>
<div class="fragment">
<p>not enough workers to complete all tasks</p>
</div>
</div>
</div>
</div>
</section>
<section id="task-scheduling" class="slide level2 center">
<h2>Task scheduling</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li><p><span class="math inline">n</span> tasks to complete (<span class="math inline">n&gt;1</span>)</p></li>
<li><p><span class="math inline">p</span> workers (<span class="math inline">p&lt;n</span>)</p></li>
</ul>
<p><strong>Need:</strong> assign multiple tasks to each worker (and manage this assignment)</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="d2-figures/parallel-computing-complex.svg" class="noinvert quarto-figure quarto-figure-center" width="500"></p>
</figure>
</div>
</div>
</div>
</div>
<p><strong>Total time</strong> (exercise)</p>
<div class="fragment">
<p><span class="math inline">\underset{k=1,\dots,p}{\text{max}}\{T_k\}\sim O(n/p)</span>\ with <span class="math inline">T_k = \sum_{i\in I_k} t_i</span>, total time to complete all tasks assigned to worker <span class="math inline">k</span> (where <span class="math inline">I_k</span> is the set of indexes of tasks assigned to worker <span class="math inline">k</span>)</p>
</div>
</section>
<section id="illustration-parallel-computing-simple-case" class="slide level2 center">
<h2>Illustration: parallel computing (simple case)</h2>
<div class="columns" data-align="center">
<div class="column" style="width:50%;">
<ul>
<li><p>a task = ‚Äúwait 1 <span class="math inline">\mu</span>s‚Äù</p></li>
<li><p>Objective: run 100 tasks</p></li>
<li><p>Number of workers: 1, 2, 4, 6, 8</p></li>
</ul>
<p><strong>Why is the time gain not linear?</strong></p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="text-align:center;">
<figure>
<figcaption>10 repetitions in each configurations</figcaption>
<p><img data-src="figs/parallel1-transparent.png"></p>
</figure>
</div>
</div></div>
</section>
<section id="context-level-2" class="slide level2 center">
<h2>Context (level 2)</h2>
<ul>
<li><p>different <strong>tasks</strong> to complete</p></li>
<li><p>multiple <strong>workers</strong> to complete the tasks</p></li>
<li><p>one or more <strong>working resources</strong><sup>1</sup></p></li>
</ul>
<p><strong>Potential bottleneck?</strong> (exercise)</p>
<div class="fragment">
<p>not enough resources for all workers</p>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>i.e.&nbsp;a set of tools/machines used by a worker to complete a task</p></li></ol></aside></section>
<section id="resource-management" class="slide level2 center">
<h2>Resource management</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<ul>
<li><span class="math inline">n</span> tasks to complete (<span class="math inline">n&gt;1</span>)</li>
<li><span class="math inline">p</span> workers (<span class="math inline">p&lt;n</span>)</li>
<li><span class="math inline">q</span> working resources (<span class="math inline">q&lt;p</span>)</li>
</ul>
<p><strong>Need:</strong></p>
<ul>
<li>assign workers to each resource (and manage this assignment)</li>
</ul>
<p><strong>Total time</strong> <span class="math inline">=</span> ? (exercise)</p>
<p><strong>Potential issues?</strong> (exercise)</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="d2-figures/parallel-computing-ressources.svg" class="noinvert quarto-figure quarto-figure-center" width="400"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="resource-management-1" class="slide level2 center">
<h2>Resource management</h2>
<p><strong>Total time</strong> <span class="math inline">= \text{max}_{\ell=1,\dots,q}\{\tau_\ell\}\sim O(n/q)</span></p>
<p>with <span class="math inline">\tau_\ell = \sum_{i\in J_\ell} t_i</span> <span class="math inline">=</span> total time to complete all tasks done on resource <span class="math inline">\ell</span> (where <span class="math inline">J_\ell</span> is the set of indexes of tasks assigned done on resource <span class="math inline">\ell</span>)</p>
<p><strong>Potential issues?</strong> multiple workers want to use the same working resources</p>
<ul>
<li>they have to wait for their turn (workers are not working all the time)</li>
<li>risk to jam<sup>1</sup> resource access (organizing resource access takes time)</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn2"><p>overhead on resource access</p></li></ol></aside></section>
<section id="illustration-overhead-for-resource-access" class="slide level2 center">
<h2>Illustration: overhead for resource access</h2>
<div class="columns" data-align="center">
<div class="column" style="width:50%;">
<ul>
<li><p>a task = ‚Äúwait 1 <span class="math inline">\mu</span>s‚Äù</p></li>
<li><p>Objective: run 100 tasks</p></li>
<li><p>8 computing units</p></li>
<li><p>Number of workers: 1, 2, 4, 8, 16, 32</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="text-align:center;">
<figure>
<figcaption>10 repetitions in each configurations</figcaption>
<p><img data-src="figs/parallel2-transparent.png"></p>
</figure>
</div>
</div></div>
</section>
<section id="context-level-3-realistic" class="slide level2 center">
<h2>Context (level 3: realistic)</h2>
<ul>
<li><p>different <strong>tasks</strong> to complete</p></li>
<li><p>multiple <strong>workers</strong> to complete the tasks</p></li>
<li><p>one or more <strong>working resources</strong></p></li>
</ul>
<p><strong>Input/Output (I/O)</strong></p>
<ul>
<li><p><strong>Input:</strong> each task requires some <strong>materials</strong> (data) to be completed, these materials are stored in a storage area (memory)</p></li>
<li><p><strong>Output:</strong> each task returns a <strong>result</strong> that need to be put in the storage area (memory)</p></li>
</ul>
<p>Examples: vector/matrix/array operations, process the content of multiple files</p>
</section>
<section id="inputoutput-management" class="slide level2 center">
<h2>Input/Output management</h2>
<ul>
<li><span class="math inline">n</span> tasks to complete (<span class="math inline">n&gt;1</span>)</li>
<li><span class="math inline">p</span> workers (<span class="math inline">p&lt;n</span>)</li>
<li><span class="math inline">q</span> working resources (<span class="math inline">q&lt;p</span>)</li>
<li>tasks need input (data) and produce output (results)</li>
</ul>
<p><strong>Need:</strong></p>
<ul>
<li>load input (data) from storage when needed by a worker to complete a task</li>
<li>write output (result) to storage when a task is completed</li>
</ul>
<p><strong>Total time</strong> <span class="math inline">=</span> ? (exercise)</p>
</section>
<section id="parallel-computing-realistic-model" class="slide level2 center">
<h2>Parallel computing: realistic model</h2>

<img data-src="d2-figures/parallel-computing-real.svg" class="noinvert r-stretch"></section>
<section id="computing-time-and-potential-bottleneck" class="slide level2 center">
<h2>Computing time and potential bottleneck</h2>
<p><strong>Total time</strong> <span class="math inline">= \text{max}_{\ell=1,\dots,q}\{\tau_\ell\}</span></p>
<p>with <span class="math inline">\tau_\ell = \sum_{i\in J_\ell} t_{i,\text{in}} + t_i + t_{i,\text{out}}</span> <span class="math inline">=</span> total time to complete all tasks done on resource <span class="math inline">\ell</span> (where <span class="math inline">J_\ell</span> is the set of indexes of tasks done on resource <span class="math inline">\ell</span>)</p>
<p><strong>Potential bottlenecks:</strong></p>
<ul>
<li>input (data) are not ready/available when a worker need them to complete a task (the worker have to wait)</li>
<li>output (results) cannot be written when a worker complete a task (the worker have to wait)</li>
</ul>
<p><strong>Overhead on memory access</strong></p>
<ul>
<li>concurrent access to a memory space when reading input and/or when writing output</li>
<li>concurrent data transfer from or to memory (the ‚Äúpipe‚Äù are jammed)</li>
</ul>
</section>
<section id="illustration-1-overhead-for-io-access" class="slide level2 center">
<h2>Illustration 1: overhead for I/O access</h2>
<div class="columns" data-align="center">
<div class="column" style="width:50%;">
<ul>
<li>a task
<ol type="1">
<li>simulate a vector of 10 values</li>
<li>compute the mean</li>
</ol></li>
<li>Objective: run 10000 tasks</li>
<li>Resources: 8 computing units</li>
<li>Number of workers: 1, 2, 4, 6, 8</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="text-align:center;">
<figure>
<figcaption>10 repetitions in each configurations</figcaption>
<p><img data-src="figs/parallel3-transparent.png"></p>
</figure>
</div>
</div></div>
</section>
<section id="illustration-2-overhead-for-io-access" class="slide level2 center">
<h2>Illustration 2: overhead for I/O access</h2>
<div class="columns" data-align="center">
<div class="column" style="width:50%;">
<ul>
<li><p>a task = ‚Äúcompute the sum of a given row in a matrix‚Äù</p></li>
<li><p>Objective: compute all row-wise sums for a <span class="math inline">10000 \times 1000</span> matrix (i.e.&nbsp;<span class="math inline">10000</span> tasks)</p></li>
<li><p>Resources: 8 computing units</p></li>
<li><p>Number of workers: 1, 2, 4, 6, 8</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center" style="text-align:center;">
<figure>
<figcaption>20 repetitions in each configurations</figcaption>
<p><img data-src="figs/parallel4-transparent.png"></p>
</figure>
</div>
</div></div>
</section>
<section id="the-vocabulary-of-parallel-computing" class="slide level2 center">
<h2>The vocabulary of parallel computing</h2>
<ul>
<li>tasks = a command or a group of commands</li>
<li>worker = a program or a sub-program (<em>like a thread or a sub-process</em>) ‚Üí <em>Software</em></li>
<li>working resources = processing units ‚Üí <em>Hardware</em></li>
<li>input = data</li>
<li>output = result</li>
<li>storage = memory</li>
</ul>
<p><strong>Attention:</strong> ‚Äúworker‚Äù may sometimes refer to a working resource in the literature</p>
</section>
<section id="task-synchronization" class="slide level2 center">
<h2>Task synchronization</h2>
<div>
<p>Sometimes tasks cannot be done in parallel</p>
<ul>
<li>Specific case: output of task <span class="math inline">i_1</span> is input of task <span class="math inline">i_2</span></li>
<li><strong>Need:</strong> wait for task <span class="math inline">i_1</span> before task <span class="math inline">i_2</span> starts</li>
</ul>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p>Example 1:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># task 1: matrix product</span></span>
<span id="cb3-2"><a href="" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> A <span class="op">@</span> B</span>
<span id="cb3-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># task 2: colwise sum over matrix C</span></span>
<span id="cb3-4"><a href="" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(C,axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column" style="width:50%;">
<p>Example 2:</p>
<ul>
<li>task 1: train a predictive model</li>
<li>task 2: use the trained model to predict new labels</li>
</ul>
</div></div>
</section></section>
<section>
<section id="why-parallel-computing-1" class="title-slide slide level1 center">
<h1>Why parallel computing</h1>

</section>
<section id="trend-over-50years" class="slide level2 center">
<h2>Trend over ~50years</h2>
<ul>
<li class="fragment">Moore‚Äôs Law (doubling the transistor counts every two years) is live</li>
<li class="fragment">Single thread performance hit a wall in 2000s</li>
<li class="fragment">Along with typical power usage and frequency</li>
<li class="fragment">Number of logical cores is doubling every ~3 years since mid-2000</li>
</ul>
</section>
<section id="trend-over-50years-2" class="slide level2 center">
<h2>Trend over ~50years (2)</h2>

<img data-src="50yearstrend/50-years-processor-trend.svg" class="r-stretch quarto-figure-center"><p class="caption">Original data up to the year 2010 collected and plotted by M. Horowitz, F. Labonte, O. Shacham, K. Olukotun, L. Hammond, and C. Batten New plot and data collected for 2010-2021 by K. Rupp</p><div class="attribution">
<p><a href="https://github.com/karlrupp/microprocessor-trend-data/tree/master/50yrs">Github repo for data</a></p>
</div>
</section>
<section id="computing-units" class="slide level2 center">
<h2>Computing units</h2>
<ul>
<li class="fragment">CPU :
<ul>
<li class="fragment">4/8/16+ execution cores (depending on context, laptop, desktop, server)</li>
<li class="fragment">Hyperthreading (Intel) or SMT (AMD), x2</li>
<li class="fragment">Vector units (multiple instructions processed on a vector of data)</li>
</ul></li>
<li class="fragment">GPU computing : 100/1000 ‚Äúsimple‚Äù cores per card</li>
</ul>
</section>
<section id="the-reality" class="slide level2 center">
<h2>The reality</h2>

<img data-src="figs/serial_waste.png" class="notransparent r-stretch quarto-figure-center"><p class="caption">A serial application only accesses 0.8% of the processing power of a 16-core CPU.</p><p><span class="math display">0.08\% = \frac{1}{16 * 2 (cores + hyperthreading) * \frac{256 (bitwide vector unit}{64(bit double)} = 128}</span></p>
</section></section>
<section>
<section id="benefits-of-parallel-computing" class="title-slide slide level1 center">
<h1>Benefits of parallel computing</h1>

</section>
<section id="faster-for-less-development" class="slide level2 center">
<h2>Faster for less development</h2>
<p><span class="math display">\frac{S_{up}}{T_{par}} \gg \frac{S_{up}}{T_{seq}}</span></p>
<p>Ratio of speedup improvment <span class="math inline">S_{up}</span> over time of development (<span class="math inline">T_{seq|par})</span> comparison.</p>
<p>From a development time perspective, return on investment (speedup) is often <em>several magnitudes of order</em> better than pure ‚Äúserial/sequential‚Äù improvment.</p>
</section>
<section id="scaling" class="slide level2 center">
<h2>Scaling</h2>
<p>Simple ‚Äúdivide and conquer‚Äù strategies in parallel programming allow to handle data with previously almost untractable sizes and scale before.</p>
</section>
<section id="energy-efficiency" class="slide level2 center">
<h2>Energy efficiency</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>This is a huge one, in the present context üò¨</p>
</div>
</div>
</div>
<p>Difficult to estimate but the <em>Thermal Design Power (TDP)</em>, given by hardware manufacturers, is a good rule of thumb. Just factor the number of units, and usual proportionality rules.</p>
</section>
<section id="energy-efficiency-a-bunch-of-cpus" class="slide level2 center">
<h2>Energy efficiency, a bunch of CPUs</h2>
<p>Example of ‚Äústandard‚Äù use : 20 <a href="https://ark.intel.com/content/www/us/en/ark/products/93796/intel-xeon-processor-e54660-v4-40m-cache-2-20-ghz.html">16-core Intel Xeon E5-4660</a> which is <span class="math inline">120~W</span> of TDP</p>
<p><span class="math display">P = (20~Processors) * (120~W/~Processors) * (24~hours) = 57.60~kWhrs</span></p>
</section>
<section id="energy-efficiency-just-a-few-big-gpus" class="slide level2 center">
<h2>Energy efficiency, just a few (big) GPUs</h2>
<p>A Tesla V100 GPU is of <span class="math inline">300~W</span> of TDP. Let‚Äôs use 4 of them.</p>
<p><span class="math display">P = (4~GPUs) * (300~W/~GPUs) * (24~hours) = 28.80~kWhrs</span></p>
<p><span class="math inline">\Longrightarrow</span> half of the power use</p>
</section></section>
<section>
<section id="laws" class="title-slide slide level1 center">
<h1>Laws</h1>

</section>
<section id="terms-and-definitions" class="slide level2 center">
<h2>Terms and definitions</h2>
<ul>
<li><strong>Speedup</strong> <span class="math inline">S_{up}(N)</span>: ratio of the time of execution in serial and parallel mode</li>
<li>Number of computing units <span class="math inline">N</span></li>
<li><span class="math inline">P</span> (resp. <span class="math inline">S</span>) is the parallel (resp. serial) fraction of the time spent in the parallel (resp. serial) part of the program (<span class="math inline">P+S=1</span>).</li>
</ul>
</section>
<section id="asymptote-of-parallel-computing-amdahls-law" class="slide level2 center">
<h2>Asymptote of parallel computing : <a href="https://en.wikipedia.org/wiki/Amdahl%27s_law" class="notransparent">Amdahl‚Äôs Law</a></h2>
<p>There <span class="math inline">P</span> is the fraction of the time spent in the parallel part of the program in <em>a sequential execution</em>.</p>
<p><span class="math display">S_{up}(N) \le \frac{1}{S+\frac{P}{N}}</span></p>
</section>
<section id="asymptote-of-parallel-computing-amdahls-law-graphic" class="slide level2 center">
<h2>Asymptote of parallel computing : Amdahl‚Äôs Law, Graphic</h2>

<img data-src="./figs/amdhals.png" class="notransparent r-stretch quarto-figure-center"><p class="caption">Ideal speedup : 100% of the code parallelized; 90%, 75%, and 50% : limited by the fractions of code that remain serial. <span class="citation" data-cites="robey2021parallel">(<a href="#/references" role="doc-biblioref" onclick="">Robey and Zamora 2021</a>)</span></p></section>
<section id="more-with-almost-less-the-pump-it-up-approach" class="slide level2 center">
<h2>More with (almost) less : the <em>pump it up</em> approach</h2>
<p><a href="https://en.wikipedia.org/wiki/Gustafson%27s_law" class="notransparent">Gustafson‚Äôs law</a></p>
<p>There now, <span class="math inline">P</span> is the fraction of the time spent in the parallel part of the program in <em>a parallel execution</em>.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="figs/gimmemore-meme.png" class="notransparent noinvert"></p>
</div><div class="column" style="width:40%;">
<p>When the size of the problem grows up proportionnaly to the number of computing units.</p>
<p><span class="math display">S_{up}(N) \le N - S*(N-1)</span></p>
<p>where <span class="math inline">N</span> is the number of computing units and <em>S</em> the serial fraction as before.</p>
</div></div>
</section>
<section id="more-with-almost-less-graphic" class="slide level2 center">
<h2>More with (almost) less : graphic</h2>

<img data-src="./figs/gustafsons.png" class="notransparent r-stretch quarto-figure-center"><p class="caption">Linear growth with the number of processor (and data size too)</p></section>
<section id="strong-vs-weak-scaling-definitions" class="slide level2 center">
<h2>Strong vs Weak Scaling, definitions</h2>
<dl>
<dt class="fragment">Strong Scaling</dt>
<dd class="fragment">
<p>Strong scaling represents the time to solution with respect to the number of processors for a fixed total size.</p>
</dd>
</dl>
<p><span class="math inline">\Rightarrow</span> Amdahl‚Äôs law</p>
<dl>
<dt class="fragment">Weak Scaling</dt>
<dd class="fragment">
<p>Weak scaling represents the time to solution with respect to the number of processors for a fixed-sized problem per processor.</p>
</dd>
</dl>
<p><span class="math inline">\Rightarrow</span> Gustafson‚Äôs law</p>
</section>
<section id="strong-vs-weak-scaling-schemas" class="slide level2 smaller center">
<h2>Strong vs Weak Scaling, schemas</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 47.5%;justify-content: center;">
<p><img data-src="d2-figures/strong-scaling.svg" class="noinvert" width="570"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 52.5%;justify-content: center;">
<p><img data-src="d2-figures/weak-scaling.svg" class="noinvert" width="630"></p>
</div>
</div>
</div>
</section></section>
<section>
<section id="types-of-parallelism" class="title-slide slide level1 center">
<h1>Types of parallelism</h1>

</section>
<section id="flynns-taxonomy" class="slide level2 center">
<h2>Flynn‚Äôs taxonomy</h2>
<table class="caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 33%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Simple Instruction</th>
<th>Multiple Instructions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Simple Data</td>
<td><img data-src="figs/SISD.svg" style="max-height: 300px;"></td>
<td><img data-src="figs/MISD.svg" style="max-height: 300px;"></td>
</tr>
<tr class="even">
<td>Multiple Data</td>
<td><img data-src="figs/SIMD.svg" style="max-height: 300px;"></td>
<td><img data-src="figs/MIMD.svg" style="max-height: 300px;"></td>
</tr>
</tbody>
</table>
</section>
<section id="a-different-approach" class="slide level2 center">
<h2>A different approach</h2>
<table class="caption-top">
<colgroup>
<col style="width: 33%">
<col style="width: 28%">
<col style="width: 22%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th>Parallelism level</th>
<th>Hardware</th>
<th>Software</th>
<th>Parallelism extraction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Instruction</td>
<td>SIMD (or VLIW)</td>
<td>Intrinsics</td>
<td>Compiler</td>
</tr>
<tr class="even">
<td>Thread</td>
<td>Multi-core RTOS</td>
<td>Library or language extension</td>
<td>Partitioning/Scheduling (dependency control)</td>
</tr>
<tr class="odd">
<td>Task</td>
<td>Multi-core (w/o RTOS)</td>
<td>Processes (OS level)</td>
<td>Partitioning/Scheduling</td>
</tr>
</tbody>
</table>
</section>
<section id="multi-processing-vs-multi-threading" class="slide level2 center">
<h2>Multi-processing vs Multi-threading</h2>
<div class="quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<figcaption>Multi-Processing</figcaption>
<p><img data-src="tikz-figures/multiprocessing_model.svg" width="600"></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<figcaption>Multi-Threading</figcaption>
<p><img data-src="tikz-figures/multithreading_model.svg" width="600"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="multi-processing-vs-multi-threading-cont." class="slide level2 center">
<h2>Multi-processing vs Multi-threading, cont.</h2>
<table class="caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 33%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Multi-processing</th>
<th>Multi-threading</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Memory</td>
<td>Exclusive</td>
<td>Shared</td>
</tr>
<tr class="even">
<td>Communication</td>
<td>Inter-process</td>
<td>At caller site</td>
</tr>
<tr class="odd">
<td>Creation overhead</td>
<td>Heavy</td>
<td>Minimal</td>
</tr>
<tr class="even">
<td>Concurrency</td>
<td>At OS level</td>
<td>Library/language</td>
</tr>
</tbody>
</table>
</section></section>
<section id="conclusion" class="title-slide slide level1 center">
<h1>Conclusion</h1>
<ul>
<li>Parallelism is everywhere, but not always easy to exploit</li>
<li>Two types of <em>scaling</em> with parallelism : strong and weak</li>
<li>Several types of parallelism : Flynn‚Äôs taxonomy, multhreading vs multiprocessing etc.</li>
</ul>
</section>

<section id="references" class="title-slide slide level1 smaller scrollable">
<h1>References</h1>

<div class="reveal-header">
<div class="header-logo">
<img data-src="../images/logo-miashs-transparent.png">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">
<p> </p>
</div>
<div class="sb-title">
<p> </p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-pelcat2010prototypage" class="csl-entry" role="listitem">
Pelcat, Maxime. 2010. <span>‚ÄúPrototypage Rapide Et g<span>√©</span>n<span>√©</span>ration de Code Pour DSP Multi-Coeurs Appliqu<span>√©</span>s <span class="nocase">√†</span> La Couche Physique Des Stations de Base 3GPP LTE.‚Äù</span> PhD thesis, INSA de Rennes.
</div>
<div id="ref-robey2021parallel" class="csl-entry" role="listitem">
Robey, R., and Y. Zamora. 2021. <em>Parallel and High Performance Computing</em>. Manning. <a href="https://www.manning.com/books/parallel-and-high-performance-computing">https://www.manning.com/books/parallel-and-high-performance-computing</a>.
</div>
</div>
</section>


    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../images/paulva_logo.svg" class="slide-logo"></p>
<div class="footer footer-default">
<p><span style="color:yellow;float:left;margin-left:7%;"><em>Introduction to parallel computing</em></span><span style="color:grey;float:right;margin-right:12%;">Advanced Programming and Parallel Computing, Master 2 MIASHS</span></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="02_Parallel-intro_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-attribution/attribution.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-animate/plugin.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-animate/svg.min.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/reveal-animate/js-yaml.min.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="02_Parallel-intro_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="02_Parallel-intro_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'animate': {"autoplay":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h/v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'convex',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.15,

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealAttribution, RevealAnimate, QuartoSupport,

          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                trigger: 'click',
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                positionFixed: true,
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>